peer = new Peer('catfish', {host: 'localhost', port: 9000});

var init = function () {

    console.log("Setting local id");
    
    var localid = $("#local_id").val();
    
    peer.on('connection', function(conn) {
        conn.on('data', function(data){
            // Will print 'hi!'
            console.log(data);
        });
    });

};

var connect = function () {

    console.log("Contacting remote id");
    console.log(JSON.stringify(peer));
    
    var remoteid = $("#remote_id").val();
    var conn = peer.connect(remote_id);
    conn.on('open', function(){
        conn.send('hi!');
    });
    
};

var COMM_MODULE = ( function () {
    var mod = {};
    
    mod.init = init;
    mod.connect = connect;
    
    return mod;
})();
