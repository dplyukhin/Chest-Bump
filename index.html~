<html>

  <body>
    <script src="http://cdn.peerjs.com/0.3/peer.js"></script>
    <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>

    <input type="text" id="local_id" value="Choose your name"/>
    <input type="button" id="submit_local" value="submit" onclick="init()" /><br/>
    <input type="text" id="remote_id" value="Enter your partner's name"/>
    <input type="button" id="submit_remote" value="submit" onclick="connect()" />

    <script>
      //$( function () {
peer = new Peer('catfish', {host: 'localhost', port: 9000});
      
      var init = function () {

      console.log("Setting local id");
    
      var localid = $("#local_id").val();
      
      peer.on('connection', function(conn) {
          conn.on('data', function(data){
              // Will print 'hi!'
              console.log(data);
          });
      });

      };

      var connect = function () {

      console.log("Contacting remote id");
      console.log(JSON.stringify(peer));
    
      var remoteid = $("#remote_id").val();
      var conn = peer.connect(remote_id);
      conn.on('open', function(){
          conn.send('hi!');
      });
      
      };
      
      var COMM_MODULE = ( function () {
      var mod = {};
      
      mod.init = init;
      mod.connect = connect;
      
      return mod;
      })();

     // });
    </script>
    
  </body>
</html>
