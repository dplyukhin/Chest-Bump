<html>
<head>

 <script type="text/javascript" src="scripts/paper.js"></script>

<script type="text/x-paperscript" src="scripts/graphics.js" canvas="myCanvas">	
</script>
    <script src="http://cdn.peerjs.com/0.3/peer.js"></script>
    <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>

    <input type="text" id="local_id" value="Choose your name"/>
    <input type="button" id="submit_local" value="submit" /><br/>
    <input type="text" id="remote_id" value="Enter your partner's name"/>
    <input type="button" id="submit_remote" value="submit" />

    <script>

CONNECTED = false;
conn = {};
NUM_PLAYERS = 1;
      $("#submit_local").click( function () {
    localId = $("#local_id").val();

    var peer = new Peer(localId, {host: 'localhost', port: 9000, debug: 3});
peer.on('connection', function(conn) {
NUM_PLAYERS +=1;
conn.on('data', function(data){
if(!CONNECTED) CONNECTED = true;
// Won't print 'hi!'
if(PLAYERS.length){
PLAYERS[0].box.position.x = data.x;
PLAYERS[0].box.position.y = data.y;//console.log(data);
}
//CONNECTED = true;
//NUM_PLAYERS += 1;
        });
        
    });
    //console.log(peer);

    $("#submit_remote").click( function () {

        console.log("Contacting remote id");
        //console.log(peer);
        remote_id = $("#remote_id").val();
        
        try {
            //p = mod.peer;
            conn = peer.connect(remote_id);
            conn.on('open', function(){
CONNECTED = true;
//NUM_PLAYERS += 1;
                
            });
        }
        catch (ReferenceError) {
            console.log("Module does not contain peer credentials");
        }
        
    });

}); 

    </script>
    
    <link rel="stylesheet" type="text/css" href="css/level_design.css">
	<link rel="stylesheet" type="text/css" href="css/bootstrap_min.css">
	
</head>


  <body>

	<div id="hill_container"> 
		<div class="halfCircle left_1"> </div>
		<div class="halfCircle left_2"> </div>
		<div class="halfCircle middle_1"> </div>
		<div class="halfCircle middle_2"> </div>
		<div class="halfCircle right_1"> </div>
		<div class="halfCircle right_2"> </div>	
		<div class="hill-container-bg"> </div>
	</div>
	
	<div id="canvas-container">

		<canvas id="myCanvas"></canvas>
	
	</div>
    
  </body>
</html>
